{% extends "layout.html" %}
{% block title %}Administration panel{% endblock %}

{% block pagebar %}
{% include "admin.nav.html" %}
{% endblock %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

{% block content %}
<div class="panel panel-default">
  <div class="panel-heading"><h2>Workers</h2></div>
  <table class="table table-striped">
   <thead>
    <th>ID</th>
    <th>Registered</th>
    <th>Total Answers</th>
    <!--<th>Failed Answers</th>-->
    <th>Rating</th>
    <th>Blocked</th>
   </thead>
   <tbody>
    {% for worker in workers %}
    <tr {%if worker.blocked == 1 %} class="danger" {% endif %} >
      <td>{{ worker.id }}</td>
      <td>{{ worker.first_seen }} </td>
      <td> {{ worker.answers|length }} </td>
      <td>{{ worker.worker_rating }}</td>
      <td>
        <form class="form-inline" role="form" method="post">
          <div class="input-group">
            <input type="hidden" name ="worker_id" value="{{worker.id}}">
            <span class="input-group-btn">
                {% if worker.blocked == 1 %}
                Yes
                {% else %}
                No
                {% endif %}
        
              <button class="btn btn-default" type="submit"> Toggle</button>
            </span>
          </div>
        </form>  
        </td>
    
    </tr>
    {% endfor %}
    <!-- <tr>
      <td>2</td>
      <td>17 days ago</td>
      <td>10</td>
      <td>2</td>
      <td>No</td>
    </tr>
    <tr class="danger">
      <td>2</td>
      <td>3 days ago</td>
      <td>7</td>
      <td>5</td>
      <td>Yes</td>
    </tr>-->
   </tbody>
  </table>
</div>
{% endblock %}
